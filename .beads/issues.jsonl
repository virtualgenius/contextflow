{"id":"contextflow-0ts","title":"Remove unused exports from mockState test fixture","description":"5 of 8 exports in src/model/actions/__testFixtures__/mockState.ts are now unused after dead action file removal: createMockGroup, createMockRelationship, createMockKeyframe, setupAnalyticsMock, setupConsoleSpy. Only createBaseMockProject, createMockContext, and createMockState are still imported.","status":"closed","priority":3,"issue_type":"task","owner":"paul@virtualgenius.com","created_at":"2026-02-26T08:20:51Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:22:16Z","closed_at":"2026-02-26T08:22:16Z","close_reason":"Closed"}
{"id":"contextflow-19e","title":"Track project export events","description":"Project import tracks project_imported but export has no analytics.\n\nThe handleExport function in TopBar.tsx (line 86) builds a JSON blob and triggers a download. No trackEvent call.\n\nFix: Add trackEvent('project_exported', project) in handleExport, before the download trigger. The project object is already available in scope. No additional metadata needed beyond the standard project metadata (context_count, relationship_count, etc.) that trackEvent includes automatically.","status":"closed","priority":2,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:39Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-392","title":"Enrich store analytics metadata for delete/add events","description":"The store's trackEvent calls for context_added, context_deleted, user_deleted, and user_need_deleted are missing useful metadata that the old (now-deleted) action files had. Add: context_type and ownership to context_added; relationship_count and group_count to context_deleted; connection_count to user_deleted; user_connection_count and context_connection_count to user_need_deleted. The project data is already in scope at each call site.","status":"closed","priority":3,"issue_type":"task","owner":"paul@virtualgenius.com","created_at":"2026-02-26T08:20:54Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:22:16Z","closed_at":"2026-02-26T08:22:16Z","close_reason":"Closed"}
{"id":"contextflow-4ei","title":"Track undo/redo usage","description":"The undo and redo actions in store.ts (lines 1030-1037) have no analytics. They delegate to Yjs UndoManager via getCollabUndoRedo().\n\nFix: Add undo_used and redo_used events. The Yjs UndoManager does not expose what action type was undone, so metadata is limited to a simple event fire. Do not attempt to track action_type or stack_depth; the underlying Yjs undo stack is opaque from the store layer.\n\nThis reveals how often users rely on undo/redo as a safety net.","status":"closed","priority":3,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:58Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-9i6","title":"Track connection deletion events","description":"Connection creation events are tracked (user_need_connection_created, need_context_connection_created) but deletions are not.\n\nStore actions with no analytics (store.ts):\n- deleteUserNeedConnection (line 808): just calls getCollabMutations().deleteUserNeedConnection()\n- deleteNeedContextConnection (line 845): just calls getCollabMutations().deleteNeedContextConnection()\n\nFix: Add user_need_connection_deleted and need_context_connection_deleted events in the store actions. Include entity_type and entity_id metadata to match the creation pattern.\n\nNote: userActions.ts has deleteUserNeedConnectionAction and deleteNeedContextConnectionAction functions, but the store does not use them; it calls collab mutations directly. The tracking should go in the store actions.","status":"closed","priority":2,"issue_type":"bug","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:37Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-bt8","title":"Track view preference toggles","description":"Settings toggles give insight into how users customize their view but none are tracked.\n\nStore actions with no analytics (store.ts):\n- toggleShowGroups (line 855)\n- toggleShowRelationships (line 861)\n- toggleIssueLabels (line 867)\n- toggleTeamLabels (line 873)\n- toggleRelationshipLabels (line 879)\n- toggleHelpTooltips (line 885)\n- setGroupOpacity (line 902)\n- setColorByMode (line 907)\n\nFix: Add a single view_preference_changed event in each action. Include preference_name (string enum) and new_value (boolean for toggles, string for colorByMode, number for opacity). These are all safe to track (no PII). Helps answer: which visual layers do users actually use?","status":"closed","priority":3,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:54Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-e1t","title":"Add Business Model Role field to bounded contexts","description":"Add a businessModelRole dropdown to the BoundedContext entity and Inspector panel. Four options: revenue-generator, engagement-creator, compliance-enforcer, cost-reduction. This captures HOW a context contributes to the business, complementing the existing strategic classification (WHAT kind of domain). Include an InfoTooltip with educational content explaining each role, following the existing tooltip pattern (ConceptDefinition, respects showHelpTooltips). From DDD Crew Bounded Context Canvas V5.","status":"closed","priority":2,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T09:01:49Z","created_by":"Paul Rayner","updated_at":"2026-02-26T09:19:53Z","closed_at":"2026-02-26T09:19:53Z","close_reason":"Closed"}
{"id":"contextflow-ezf","title":"Track share link generation","description":"The ShareProjectDialog component (src/components/ShareProjectDialog.tsx) lets users generate and copy collaboration links but has no analytics.\n\nKey functions:\n- getShareUrl (line 12): generates the share URL\n- handleCopy (line 53): copies URL to clipboard\n\nFix: Add a single share_link_copied event in handleCopy. The share URL is generated on dialog open (not a separate user action), so tracking the copy is the meaningful signal. Include project metadata (pass project to trackEvent). Do NOT include the actual URL in the event (PII policy: no full URLs).","status":"closed","priority":3,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:34:00Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-gwm","title":"Track entity property update events","description":"Entity creation and deletion are well-tracked, but property updates are inconsistently covered. Context property changes ARE tracked via context_property_changed and trackTextFieldEdit in contextActions.ts. The same pattern should extend to other entity types.\n\nStore actions with no update tracking:\n- updateGroup (store.ts:512): group name, color, notes\n- updateTeam (store.ts:615): team name\n- updateUser (store.ts:696): user name, type (internal/external)\n- updateUserNeed (store.ts:759): need text, visibility\n- updateKeyframe (store.ts:1250): keyframe label, date\n- updateFlowStage (store.ts:914): stage name, color\n- updateUserNeedConnection (store.ts:813): connection properties\n- updateNeedContextConnection (store.ts:850): connection properties\n\nImplementation approach: Follow the contextActions.ts pattern:\n- Use trackPropertyChange for enum/boolean changes (e.g., user type, need visibility)\n- Use trackTextFieldEdit for text fields (PII-safe: char counts only, never actual text)\n- Each update action receives an updates object; check which keys changed and track accordingly\n\nPII rules apply: never track actual names, text content, or descriptions. Only track field_name, old/new char counts, and enum values.","status":"closed","priority":2,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:44Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-kmy","title":"Track group membership changes","description":"Group creation and deletion are tracked (group_created, group_deleted) but membership changes are not.\n\nStore actions with no analytics (store.ts):\n- removeContextFromGroup (line 528)\n- addContextToGroup (line 533)\n- addContextsToGroup (line 538)\n\nAll three just call getCollabMutations() with no tracking.\n\nFix: Add context_added_to_group and context_removed_from_group events. Include member_count (number of contexts in group after the change). Do NOT include group names or context names (PII policy). Use hashProjectId pattern if group_id is needed.","status":"closed","priority":3,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:50Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-mb4","title":"Track temporal mode toggle","description":"Temporal keyframe CRUD is tracked (keyframe_created, keyframe_deleted, keyframe_context_position_changed) but the act of toggling temporal mode on/off is not.\n\nStore action: toggleTemporalMode (store.ts:1131)\n\nFix: Add temporal_mode_toggled event with enabled: true/false (the new state after toggle). This tells us adoption rate of the temporal feature. The project param is available in the action (project is fetched at line 1135).","status":"closed","priority":3,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:56Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-mkh","title":"Add first_relationship_added FTUE milestone","description":"The trackFTUEMilestone function defines first_relationship_added but it's never called. The other 3 FTUE milestones are all triggered from store.ts:\n\n- first_context_added (store.ts:410, contextActions.ts:268)\n- first_group_created (store.ts:504)\n- second_view_discovered (store.ts:237)\n\nFix: Add trackFTUEMilestone('first_relationship_added', null) after the trackEvent call in addRelationship (store.ts:557). Note: addRelationship currently passes null for the project param; this is consistent with the existing pattern there.","status":"closed","priority":1,"issue_type":"bug","owner":"paul@virtualgenius.com","created_at":"2026-02-26T07:33:30Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:00:01Z","closed_at":"2026-02-26T08:00:01Z","close_reason":"Closed","labels":["product"]}
{"id":"contextflow-nff","title":"Add Big Ball of Mud flag to bounded contexts","description":"Add an isBigBallOfMud boolean field to BoundedContext, similar to isLegacy. When enabled, shows a visual badge on the context node (like the Legacy badge). Represents Eric Evans' strategic design pattern: a system with mixed models and inconsistent boundaries that needs isolation. Add to Inspector as a toggle alongside the existing Legacy toggle. Include an InfoTooltip explaining what BBoM means and why it matters (signals need for isolation/decomposition), following the existing tooltip pattern.","status":"closed","priority":2,"issue_type":"feature","owner":"paul@virtualgenius.com","created_at":"2026-02-26T09:01:52Z","created_by":"Paul Rayner","updated_at":"2026-02-26T09:19:53Z","closed_at":"2026-02-26T09:19:53Z","close_reason":"Closed"}
{"id":"contextflow-q8e","title":"Bug: dragging contexts in Strategic/Distillation views does not auto-classify","description":"Moving a context in Strategic view should auto-update evolutionStage (genesis/custom-built/product/commodity) based on x position. Moving in Distillation view should auto-update strategicClassification (core/supporting/generic). The logic exists in contextActions.ts moveContextAction (lines 113-126) using classifyFromStrategicPosition and classifyFromDistillationPosition, but this is dead code. The store's updateContextPosition just calls getCollabMutations().updateContextPosition() with no classification. The distillation view has partial logic in setViewMode (runs on view switch only, not during drag). Fix: add auto-classification to the collab mutation code path, likely in updateContextPosition or as a post-drag handler similar to completeFlowStageMove.","status":"closed","priority":1,"issue_type":"bug","owner":"paul@virtualgenius.com","created_at":"2026-02-26T05:20:48Z","created_by":"Paul Rayner","updated_at":"2026-02-26T05:53:05Z","closed_at":"2026-02-26T05:53:05Z","close_reason":"Closed"}
{"id":"contextflow-y4d","title":"Audit and remove dead action functions superseded by collab mutations","description":"The store was refactored to use collab mutations (getCollabMutations()) but the old action functions in src/model/actions/ still exist with stale trackEvent calls. context_added, user_added, user_need_added events were silently dropped because the store methods were the real code path. Audit all action files (contextActions.ts, userActions.ts, etc.) to identify which functions are dead code vs still called, and remove the dead ones. Single source of truth should be the store methods.","status":"closed","priority":2,"issue_type":"task","owner":"paul@virtualgenius.com","created_at":"2026-02-26T04:58:00Z","created_by":"Paul Rayner","updated_at":"2026-02-26T08:13:28Z","closed_at":"2026-02-26T08:13:28Z","close_reason":"Deleted 4 dead action files (contextActions, userActions, teamActions, temporalActions) plus their tests, removed unused userActions import from store.ts. 3,352 lines removed. projectActions, projectHelpers, and keyframeHelpers kept (still actively used)."}
